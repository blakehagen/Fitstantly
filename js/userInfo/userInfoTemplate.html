<script type="text/javascript">

	OAuth.callback('fitbit')

		.done(function(result) {
			console.log("test test test", result);

			promisesArray.push(result.get('https://api.fitbit.com/1/user/-/activities/date/' + currentDate + '.json')) // ---> current date steps
			promisesArray.push(result.get('https://api.fitbit.com/1/user/-/activities/steps/date/' + currentDate + '/7d.json')) // ---> steps for last 7 days
			promisesArray.push(result.get('https://api.fitbit.com/1/user/-/activities/minutesVeryActive/date/' + currentDate + '/7d.json')) // ---> veryActive minutes for last 7 days
			promisesArray.push(result.get('https://api.fitbit.com/1/user/-/activities/steps/date/' + currentMonthRange + '.json')) // ---> steps for current month
			promisesArray.push(result.get('https://api.fitbit.com/1/user/-/activities/minutesVeryActive/date/' + currentMonthRange + '.json')) // ---> veryActive minutes for current month
			promisesArray.push(result.get('https://api.fitbit.com/1/user/-/activities.json')) // ---> best steps all-time

			$q.all(promisesArray).then(function(res){
				deferred.resolve(res)
				
			}, function(err){
				console.log(err)
				deferred.reject(err)
				
			})

		}).fail(function(err) {
			deferred.reject();
	  		alert("Authentication failed. Please try again.");
		})
		return deferred.promise;





</script>




<div class="parent-wrapper">
	<div class="user-main-container">
		<div class="user-dashboard-container">
			<div class="sm-widget" id="sm-widget-header">
				<div>
					<h3 id="h3-text">Fitstantly Dashboard</h3>
				</div>
			</div>

			<div class="user-90-percent-container">
				<div class="sm-widget">
					<h3 id="h3-text">Step Count Today:</h3>
					<h2 id="user-view-main-text">{{todaySteps}}</h2>
					<h6 id="h6-text">{{stepsComment}}</h6>
				</div>
				<div class="sm-widget">
					<h3 id="h3-text">Active Minutes Today:</h3>
					<h2 id="user-view-main-text">{{todayActive}}</h2>
					<h6 id="h6-text">{{activeComment}}</h6>
				</div>
				<div class="sm-widget">
					<h3 id="h3-text">All-Time Steps Record:</h3>
					<h2 id="user-view-main-text">{{bestStepsAllTime}}</h2>
					<h6 id="h6-text">Achieved on: {{dateBest}}</h6>
				</div>
			</div>
		</div>

		<div class="chart-wrapper">
			<div class="lg-widget" id="lg-widget-header">
				<div>
					<h3 id="h3-text">Last 7 Days (Fitbit Data)</h3>
				</div>
			</div>
		<!-- ng-click="toggleModal()" -->
			<div class="lg-widget">
		  		<div class="spacer">
					<canvas id="line" class="chart chart-line" data="data"
					labels="labels" series="series"> 
					</canvas> 
				</div>
			</div>
		</div>



		<div class="user-dashboard-container">
			<div class="user-90-percent-container">
				<div class="sm-widget" id="sm-widget-smaller">
					<h3 id="h3-text">7-day Steps Record:</h3>
					<h4 id="user-view-main-text">{{bestWeekSteps}}</h4>
				</div>
				<div class="sm-widget" id="sm-widget-smaller">
					<div>
						<h3 id="h3-text">7-day Steps Average:</h3>
						<h4 id="user-view-main-text">{{avgWeek}}</h4>
					</div>
				</div>
				<div class="sm-widget" id="sm-widget-smaller">
					<h3 id="h3-text">7-day Active Minutes Record:</h3>
					<h4 id="user-view-main-text">{{bestWeekMinutes}}</h4>
				</div>
				<div class="sm-widget" id="sm-widget-smaller">
					<h3 id="h3-text">7-day Active Minutes Average:</h3>
					<h4 id="user-view-main-text">{{avgActiveWeek}}</h4>
				</div>
			</div>
		</div>
	</div>
</div>

<footer>
	<div class="footer">
		<div><h5 id="h5-text">Fitstantly &copy 2015 | All Rights Reserved</h5>
		</div>
	</div>
</footer>

